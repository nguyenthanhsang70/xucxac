<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ai lÃ  Thá»§ Pháº¡m? - TrÃ² ChÆ¡i PhÃ¡ Ãn</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C5CE7;
            --secondary: #A29BFE;
            --dark: #2D3436;
            --light: #F5F6FA;
            --success: #00B894;
            --danger: #D63031;
            --warning: #FDCB6E;
            --info: #0984E3;
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #2D3436 0%, #000000 100%);
            min-height: 100vh;
            color: var(--light);
            line-height: 1.6;
            padding: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            padding: 15px 0;
        }
        
        .header::after {
            content: '';
            display: block;
            width: 80px;
            height: 3px;
            background: var(--primary);
            margin: 10px auto;
            border-radius: 2px;
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            margin-bottom: 8px;
            background: linear-gradient(to right, #A29BFE, #6C5CE7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 0.5px;
        }
        
        .header p {
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            opacity: 0.9;
            padding: 0 10px;
        }
        
        .action-icons {
            position: absolute;
            top: 10px;
            right: 0;
            display: flex;
            gap: 8px;
        }
        
        .back-icon {
            position: absolute;
            top: 10px;
            left: 0;
        }
        
        .icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--card-bg);
            backdrop-filter: blur(5px);
            border: 1px solid var(--card-border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--light);
            font-size: 16px;
        }
        
        .icon-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }
        
        .game-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--card-border);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .card h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.4rem, 3vw, 1.8rem);
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .suspects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }
        
        .suspect-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .suspect-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--primary);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }
        
        .suspect-card:hover {
            background: rgba(108, 92, 231, 0.2);
        }
        
        .suspect-card:hover::before {
            transform: scaleX(1);
        }
        
        .suspect-card.eliminated {
            background: rgba(214, 48, 49, 0.2);
            opacity: 0.7;
            border-color: var(--danger);
        }
        
        .suspect-card.selected {
            border-color: var(--success);
            background: rgba(0, 184, 148, 0.2);
        }
        
        .suspect-card.selected::before {
            background: var(--success);
            transform: scaleX(1);
        }
        
        .suspect-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            box-shadow: 0 3px 10px rgba(108, 92, 231, 0.4);
        }
        
        .suspect-card.eliminated .suspect-avatar {
            background: linear-gradient(45deg, #D63031, #FF7675);
        }
        
        .suspect-card.selected .suspect-avatar {
            background: linear-gradient(45deg, #00B894, #55EFC4);
        }
        
        .suspect-card h4 {
            font-size: 1rem;
            margin-bottom: 4px;
            color: var(--light);
        }
        
        .suspect-card p {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .clue-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 3px solid var(--primary);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .clue-item:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 20px 0;
        }
        
        .btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            box-shadow: 0 3px 10px rgba(108, 92, 231, 0.4);
            text-align: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.6);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn.success {
            background: linear-gradient(45deg, var(--success), #55EFC4);
            box-shadow: 0 3px 10px rgba(0, 184, 148, 0.4);
        }
        
        .btn.success:hover {
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.6);
        }
        
        .btn.warning {
            background: linear-gradient(45deg, var(--warning), #FFEAA7);
            box-shadow: 0 3px 10px rgba(253, 203, 110, 0.4);
            color: var(--dark);
        }
        
        .btn.warning:hover {
            box-shadow: 0 5px 15px rgba(253, 203, 110, 0.6);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
            padding: 15px;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #2D3436 0%, #000000 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            width: 100%;
            animation: modalAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            border: 1px solid var(--card-border);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--danger);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-size: 14px;
        }
        
        .close-modal:hover {
            transform: rotate(90deg) scale(1.1);
        }
        
        .modal h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 4vw, 2rem);
            margin-bottom: 15px;
            background: linear-gradient(to right, #A29BFE, #6C5CE7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .progress-info {
            font-size: 0.9rem;
            margin: 12px 0;
            padding: 8px;
            border-radius: 6px;
            background: rgba(0, 184, 148, 0.2);
            border: 1px solid rgba(0, 184, 148, 0.3);
        }
        
        .modal-buttons {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-buttons .btn {
            margin: 0;
            width: 100%;
        }
        
        /* Tablet and Desktop */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            
            .header {
                margin-bottom: 30px;
                padding: 20px 0;
            }
            
            .header::after {
                width: 100px;
                height: 4px;
                margin: 15px auto;
            }
            
            .game-area {
                grid-template-columns: 1fr 1fr;
                gap: 25px;
                margin-bottom: 30px;
            }
            
            .card {
                padding: 25px;
                border-radius: 15px;
            }
            
            .suspects-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 15px;
            }
            
            .suspect-avatar {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }
            
            .suspect-card h4 {
                font-size: 1.1rem;
            }
            
            .suspect-card p {
                font-size: 0.9rem;
            }
            
            .clue-item {
                padding: 15px;
                font-size: 1rem;
            }
            
            .controls {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin: 25px 0;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .modal-buttons {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        /* Large Desktop */
        @media (min-width: 1200px) {
            .suspects-grid {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }
        }
        
        /* Small Mobile */
        @media (max-width: 360px) {
            .suspects-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .suspect-avatar {
                width: 50px;
                height: 50px;
                font-size: 1.6rem;
            }
            
            .suspect-card h4 {
                font-size: 0.9rem;
            }
            
            .suspect-card p {
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="icon-btn back-icon" onclick="goBack()">â†</button>
            <h1>ğŸ” AI LÃ€ THá»¦ PHáº M?</h1>
            <p>Sá»­ dá»¥ng cÃ¡c manh má»‘i Ä‘á»ƒ tÃ¬m ra thá»§ pháº¡m thá»±c sá»±!</p>
            <div class="action-icons">
                <button class="icon-btn" onclick="showHelpModal()">i</button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="card">
                <h2><span>ğŸ“‹</span> ThÃ´ng Tin Vá»¥ Ãn</h2>
                <div id="caseDetails">
                    <h3>ğŸ  Vá»¥ Trá»™m Táº¡i Biá»‡t Thá»± Sang Trá»ng</h3>
                    <p><strong>Thá»i gian:</strong> Tá»‘i 15/8/2025, 20:00</p>
                    <p><strong>Äá»‹a Ä‘iá»ƒm:</strong> Biá»‡t thá»± cá»§a Ã´ng Minh, quáº­n 1</p>
                    <p><strong>Váº­t bá»‹ máº¥t:</strong> Chiáº¿c nháº«n kim cÆ°Æ¡ng trá»‹ giÃ¡ 2 tá»· Ä‘á»“ng</p>
                    <p><strong>TÃ¬nh huá»‘ng:</strong> Ã”ng Minh tá»• chá»©c tiá»‡c sinh nháº­t, cÃ³ 6 khÃ¡ch má»i. Sau khi tiá»‡c káº¿t thÃºc, chiáº¿c nháº«n kim cÆ°Æ¡ng trong kÃ©t sáº¯t biáº¿n máº¥t!</p>
                </div>
                
                <h2><span>ğŸ­</span> Nghi Pháº¡m</h2>
                <div class="suspects-grid" id="suspectsGrid">
                    <!-- Suspects will be generated here -->
                </div>
                
                <div class="eliminated-list" id="eliminatedList" style="display: none;">
                    <h4>âŒ ÄÃ£ Loáº¡i Trá»«:</h4>
                    <div id="eliminatedNames"></div>
                </div>
            </div>
            
            <div class="card">
                <h2><span>ğŸ”</span> Manh Má»‘i</h2>
                <div id="cluesList">
                    <!-- Clues will be generated here -->
                </div>
                
                <div class="controls">
                    <button class="btn" onclick="showNewClue()">
                        <span>ğŸ”</span> Manh Má»‘i Tiáº¿p Theo
                    </button>
                    <button class="btn success" onclick="makeGuess()">
                        <span>ğŸ¯</span> TÃ´i Biáº¿t Thá»§ Pháº¡m!
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <h2 id="resultTitle"></h2>
            <div id="resultContent"></div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeHelpModal()">&times;</button>
            <h2><span>ğŸ“–</span> HÆ°á»›ng Dáº«n ChÆ¡i</h2>
            <div style="text-align: left; margin-top: 15px;">
                <h3>ğŸ” CÃ¡ch chÆ¡i:</h3>
                <p>1. Äá»c ká»¹ thÃ´ng tin vá»¥ Ã¡n vÃ  danh sÃ¡ch nghi pháº¡m</p>
                <p>2. Nháº¥n nÃºt "Manh Má»‘i Tiáº¿p Theo" Ä‘á»ƒ nháº­n manh má»‘i má»›i</p>
                <p>3. PhÃ¢n tÃ­ch manh má»‘i Ä‘á»ƒ loáº¡i trá»« cÃ¡c nghi pháº¡m vÃ´ tá»™i</p>
                <p>4. Nháº¥n vÃ o nghi pháº¡m Ä‘á»ƒ loáº¡i trá»« hoáº·c chá»n láº¡i</p>
                <p>5. Khi Ä‘Ã£ cÃ³ Ä‘á»§ manh má»‘i, nháº¥n "TÃ´i Biáº¿t Thá»§ Pháº¡m!" Ä‘á»ƒ Ä‘Æ°a ra káº¿t luáº­n</p>
                
                <h3 style="margin-top: 15px;">ğŸ¯ Má»¥c tiÃªu:</h3>
                <p>- TÃ¬m ra thá»§ pháº¡m thá»±c sá»± vá»›i Ã­t manh má»‘i nháº¥t</p>
                <p>- Giáº£i quyáº¿t táº¥t cáº£ cÃ¡c vá»¥ Ã¡n trong game</p>
                
                <h3 style="margin-top: 15px;">ğŸ’¡ Máº¹o chÆ¡i:</h3>
                <p>- Káº¿t há»£p nhiá»u manh má»‘i Ä‘á»ƒ cÃ³ káº¿t luáº­n chÃ­nh xÃ¡c</p>
                <p>- Ghi chÃº láº¡i cÃ¡c thÃ´ng tin quan trá»ng</p>
                <p>- Äá»«ng vá»™i káº¿t luáº­n khi chÆ°a cÃ³ Ä‘á»§ báº±ng chá»©ng</p>
            </div>
            <div class="modal-buttons">
                <button class="btn" onclick="closeHelpModal()">ÄÃ£ hiá»ƒu!</button>
            </div>
        </div>
    </div>
    
    <script>
        // Game data and logic remains the same as previous version
        let currentCase = {};
        let eliminatedSuspects = [];
        let shownClues = [];
        let currentCaseIndex = 0;
        let completedCases = [];
        const cases = [
            {
                title: "ğŸ  Vá»¥ Trá»™m Táº¡i Biá»‡t Thá»± Sang Trá»ng",
                location: "Biá»‡t thá»± cá»§a Ã´ng Minh, quáº­n 1",
                time: "Tá»‘i 15/8/2025, 20:00",
                item: "Chiáº¿c nháº«n kim cÆ°Æ¡ng trá»‹ giÃ¡ 2 tá»· Ä‘á»“ng",
                situation: "Ã”ng Minh tá»• chá»©c tiá»‡c sinh nháº­t, cÃ³ 6 khÃ¡ch má»i. Sau khi tiá»‡c káº¿t thÃºc, chiáº¿c nháº«n kim cÆ°Æ¡ng trong kÃ©t sáº¯t biáº¿n máº¥t!",
                suspects: [
                    {name: "Lan", avatar: "ğŸ‘©â€ğŸ’¼", description: "ThÆ° kÃ½ cá»§a Ã´ng Minh", guilty: false},
                    {name: "Nam", avatar: "ğŸ‘¨â€ğŸ³", description: "Äáº§u báº¿p tiá»‡c", guilty: false},
                    {name: "Hoa", avatar: "ğŸ‘©â€ğŸ¨", description: "Há»a sÄ©, báº¡n cÅ©", guilty: true},
                    {name: "DÅ©ng", avatar: "ğŸ‘¨â€ğŸ’»", description: "ChuyÃªn gia IT", guilty: false},
                    {name: "Mai", avatar: "ğŸ‘©â€âš•ï¸", description: "BÃ¡c sÄ© gia Ä‘Ã¬nh", guilty: false},
                    {name: "Tuáº¥n", avatar: "ğŸ‘¨â€ğŸµ", description: "Nháº¡c sÄ© kiÃªm DJ", guilty: false}
                ],
                clues: [
                    "ğŸ” KÃ©t sáº¯t khÃ´ng cÃ³ dáº¥u hiá»‡u bá»‹ phÃ¡, thá»§ pháº¡m biáº¿t máº­t kháº©u",
                    "ğŸ‘€ Camera an ninh tháº¥y ai Ä‘Ã³ vÃ o phÃ²ng lÃ m viá»‡c lÃºc 21:30",
                    "ğŸ’ Thá»§ pháº¡m Ä‘eo gÄƒng tay mÃ u Ä‘á» trong tiá»‡c",
                    "ğŸ“± Äiá»‡n thoáº¡i cá»§a thá»§ pháº¡m rung liÃªn tá»¥c, cÃ³ váº» Ä‘ang ná»£ náº§n",
                    "ğŸ¨ Thá»§ pháº¡m cÃ³ kiáº¿n thá»©c vá» kim cÆ°Æ¡ng vÃ  Ä‘Ã¡ quÃ½",
                    "â˜• Thá»§ pháº¡m khÃ´ng uá»‘ng rÆ°á»£u, chá»‰ uá»‘ng cÃ  phÃª Ä‘en",
                    "ğŸ—ï¸ Chá»‰ cÃ³ 3 ngÆ°á»i biáº¿t máº­t kháº©u kÃ©t: Lan, Hoa vÃ  Ã´ng Minh",
                    "ğŸ­ Lan á»Ÿ báº¿p suá»‘t tá»« 21:00-22:00, cÃ³ nhÃ¢n chá»©ng",
                    "ğŸ” TÃ¬m tháº¥y sá»£i váº£i mÃ u Ä‘á» gáº§n kÃ©t sáº¯t"
                ]
            },
            {
                title: "ğŸ¢ Vá»¥ Ãn Táº¡i VÄƒn PhÃ²ng",
                location: "Táº§ng 20 tÃ²a nhÃ  Landmark",
                time: "SÃ¡ng 16/8/2025, 08:30",
                item: "Há»“ sÆ¡ bÃ­ máº­t cá»§a dá»± Ã¡n trá»‹ giÃ¡ 50 tá»·",
                situation: "CÃ´ng ty ABC phÃ¡t hiá»‡n há»“ sÆ¡ dá»± Ã¡n quan trá»ng bá»‹ Ä‘Ã¡nh cáº¯p. CÃ³ 5 nhÃ¢n viÃªn cÃ³ quyá»n truy cáº­p vÃ o kÃ©t tÃ i liá»‡u.",
                suspects: [
                    {name: "An", avatar: "ğŸ‘¨â€ğŸ’¼", description: "GiÃ¡m Ä‘á»‘c nhÃ¢n sá»±", guilty: false},
                    {name: "BÃ¬nh", avatar: "ğŸ‘©â€ğŸ’»", description: "TrÆ°á»Ÿng phÃ²ng IT", guilty: true},
                    {name: "Chi", avatar: "ğŸ‘©â€ğŸ’¼", description: "Káº¿ toÃ¡n trÆ°á»Ÿng", guilty: false},
                    {name: "Äáº¡t", avatar: "ğŸ‘¨â€ğŸ”§", description: "Báº£o vá»‡ ca Ä‘Ãªm", guilty: false},
                    {name: "Eva", avatar: "ğŸ‘©â€ğŸ“", description: "Thá»±c táº­p sinh", guilty: false}
                ],
                clues: [
                    "ğŸ’» Há»‡ thá»‘ng ghi nháº­n Ä‘Äƒng nháº­p lÃºc 6:00 sÃ¡ng",
                    "ğŸ”‘ Thá»§ pháº¡m cÃ³ tháº» tá»« cáº¥p cao",
                    "ğŸ“Š Thá»§ pháº¡m hiá»ƒu rÃµ giÃ¡ trá»‹ cá»§a há»“ sÆ¡",
                    "â˜• TÃ¬m tháº¥y cá»‘c cÃ  phÃª sá»¯a gáº§n kÃ©t tÃ i liá»‡u",
                    "ğŸ‘” Camera tháº¥y ngÆ°á»i máº·c Ã¡o xanh navy",
                    "ğŸ“± Thá»§ pháº¡m dÃ¹ng USB Ä‘á»ƒ copy dá»¯ liá»‡u",
                    "ğŸš— An Ä‘i cÃ´ng tÃ¡c tá»« ngÃ y 15/8, váº¯ng máº·t",
                    "ğŸƒâ€â™€ï¸ Chi bá»‹ bá»‡nh, nghá»‰ lÃ m 2 ngÃ y",
                    "ğŸ” BÃ¬nh tá»«ng lÃ m viá»‡c cho cÃ´ng ty Ä‘á»‘i thá»§"
                ]
            },
            {
                title: "ğŸ’€ Vá»¥ Ãn Máº¡ng Táº¡i KhÃ¡ch Sáº¡n",
                location: "PhÃ²ng 507, KhÃ¡ch sáº¡n Golden Star",
                time: "ÄÃªm 17/8/2025, 23:45",
                item: "TÃ­nh máº¡ng cá»§a doanh nhÃ¢n Pháº¡m VÄƒn ThÃ nh",
                situation: "Doanh nhÃ¢n Pháº¡m VÄƒn ThÃ nh Ä‘Æ°á»£c tÃ¬m tháº¥y Ä‘Ã£ qua Ä‘á»i trong phÃ²ng khÃ¡ch sáº¡n. Cáº£nh sÃ¡t xÃ¡c Ä‘á»‹nh Ä‘Ã¢y lÃ  vá»¥ Ã¡n máº¡ng cÃ³ chá»§ Ä‘Ã­ch. CÃ³ 6 ngÆ°á»i cÃ³ Ä‘á»™ng cÆ¡ vÃ  cÆ¡ há»™i gÃ¢y Ã¡n.",
                suspects: [
                    {name: "Linh", avatar: "ğŸ‘©â€ğŸ’¼", description: "Vá»£ cÅ© cá»§a náº¡n nhÃ¢n", guilty: false},
                    {name: "Khang", avatar: "ğŸ‘¨â€ğŸ’»", description: "Äá»‘i tÃ¡c kinh doanh", guilty: true},
                    {name: "Thá»§y", avatar: "ğŸ‘©â€âš•ï¸", description: "BÃ¡c sÄ© riÃªng", guilty: false},
                    {name: "HoÃ ng", avatar: "ğŸ‘¨â€ğŸ’¼", description: "Luáº­t sÆ° cá»§a náº¡n nhÃ¢n", guilty: false},
                    {name: "My", avatar: "ğŸ‘©â€ğŸ­", description: "NgÆ°á»i tÃ¬nh bÃ­ máº­t", guilty: false},
                    {name: "SÆ¡n", avatar: "ğŸ‘¨â€ğŸ”§", description: "Thá»£ sá»­a chá»¯a khÃ¡ch sáº¡n", guilty: false}
                ],
                clues: [
                    "âš°ï¸ Náº¡n nhÃ¢n cháº¿t do ngá»™ Ä‘á»™c, khÃ´ng pháº£i báº¡o lá»±c",
                    "ğŸ· TÃ¬m tháº¥y ly rÆ°á»£u vang cÃ²n nguyÃªn váº¹n trÃªn bÃ n",
                    "ğŸ’Š PhÃ¡p y phÃ¡t hiá»‡n cháº¥t Ä‘á»™c trong mÃ¡u náº¡n nhÃ¢n",
                    "ğŸ¨ Tháº» tá»« cho tháº¥y cÃ³ ngÆ°á»i vÃ o phÃ²ng lÃºc 23:30",
                    "ğŸ“ Cuá»™c gá»i cuá»‘i cÃ¹ng cá»§a náº¡n nhÃ¢n lÃ  23:15",
                    "ğŸ’° Náº¡n nhÃ¢n vá»«a kÃ½ há»£p Ä‘á»“ng lá»›n trá»‹ giÃ¡ 100 tá»·",
                    "ğŸ—ï¸ Linh khÃ´ng cÃ³ tháº» tá»«, Ä‘Ã£ ly hÃ´n 2 nÄƒm",
                    "ğŸ’‰ Thá»§y cÃ³ kiáº¿n thá»©c vá» thuá»‘c vÃ  cháº¥t Ä‘á»™c",
                    "ğŸ“‹ Khang lÃ  ngÆ°á»i thá»¥ hÆ°á»Ÿng báº£o hiá»ƒm 50 tá»· náº¿u náº¡n nhÃ¢n cháº¿t",
                    "ğŸ” Chá»‰ cÃ³ Khang vÃ  HoÃ ng cÃ³ tháº» tá»« cáº¥p cao"
                ]
            },
            {
                title: "ğŸ‘¶ Vá»¥ Báº¯t CÃ³c Tráº» Em",
                location: "CÃ´ng viÃªn Tao ÄÃ n, quáº­n 1",
                time: "Chiá»u 18/8/2025, 16:30",
                item: "BÃ© Minh An, 5 tuá»•i",
                situation: "BÃ© Minh An biáº¿n máº¥t khi Ä‘ang chÆ¡i á»Ÿ cÃ´ng viÃªn cÃ¹ng gia Ä‘Ã¬nh. Camera an ninh ghi Ä‘Æ°á»£c cáº£nh má»™t ngÆ°á»i láº¡ tiáº¿p cáº­n bÃ©. Cáº£nh sÃ¡t xÃ¡c Ä‘á»‹nh cÃ³ 5 nghi pháº¡m tiá»m nÄƒng.",
                suspects: [
                    {name: "Duy", avatar: "ğŸ‘¨â€ğŸ«", description: "GiÃ¡o viÃªn máº§m non", guilty: false},
                    {name: "Nga", avatar: "ğŸ‘©â€ğŸ³", description: "NgÆ°á»i bÃ¡n káº¹o gáº§n cÃ´ng viÃªn", guilty: false},
                    {name: "TÃ¢m", avatar: "ğŸ‘¨â€ğŸ¨", description: "Há»a sÄ© váº½ tranh", guilty: false},
                    {name: "Huyá»n", avatar: "ğŸ‘©â€ğŸ¦³", description: "NgÆ°á»i giÃºp viá»‡c cÅ©", guilty: true},
                    {name: "QuÃ¢n", avatar: "ğŸ‘¨â€ğŸš—", description: "TÃ i xáº¿ taxi", guilty: false}
                ],
                clues: [
                    "ğŸ‘ï¸ Camera tháº¥y ngÆ°á»i phá»¥ ná»¯ tÃ³c dÃ i tiáº¿p cáº­n bÃ©",
                    "ğŸ­ BÃ© Ä‘Æ°á»£c cho káº¹o trÆ°á»›c khi biáº¿n máº¥t",
                    "ğŸš— CÃ³ xe mÃ u tráº¯ng Ä‘áº­u gáº§n cÃ´ng viÃªn lÃºc 16:25",
                    "ğŸ“± Nghi pháº¡m biáº¿t tÃªn vÃ  thÃ´ng tin cÃ¡ nhÃ¢n cá»§a bÃ©",
                    "ğŸ’° Gia Ä‘Ã¬nh nháº­n Ä‘Æ°á»£c yÃªu cáº§u tiá»n chuá»™c 500 triá»‡u",
                    "ğŸ  Nghi pháº¡m biáº¿t rÃµ thÃ³i quen cá»§a gia Ä‘Ã¬nh",
                    "ğŸ‘” Duy Ä‘ang dáº¡y há»c, cÃ³ alibi rÃµ rÃ ng",
                    "ğŸ¨ TÃ¢m lÃ  nam giá»›i, khÃ´ng khá»›p vá»›i mÃ´ táº£ camera",
                    "ğŸš• QuÃ¢n cÃ³ báº±ng lÃ¡i xe, nhÆ°ng khÃ´ng cÃ³ xe riÃªng",
                    "ğŸ” Huyá»n bá»‹ sa tháº£i 1 thÃ¡ng trÆ°á»›c vÃ¬ mÃ¢u thuáº«n"
                ]
            },
            {
                title: "ğŸ”¥ Vá»¥ PhÃ³ng Há»a NhÃ  Kho",
                location: "Khu cÃ´ng nghiá»‡p TÃ¢n BÃ¬nh",
                time: "Ráº¡ng sÃ¡ng 19/8/2025, 02:00",
                item: "NhÃ  kho chá»©a hÃ ng trá»‹ giÃ¡ 20 tá»· Ä‘á»“ng",
                situation: "NhÃ  kho cá»§a cÃ´ng ty váº­n táº£i bá»‹ chÃ¡y trong Ä‘Ãªm. Äiá»u tra ban Ä‘áº§u cho tháº¥y Ä‘Ã¢y lÃ  vá»¥ phÃ³ng há»a cÃ³ chá»§ Ä‘Ã­ch. CÃ³ 6 ngÆ°á»i cÃ³ Ä‘á»™ng cÆ¡ vÃ  kháº£ nÄƒng thá»±c hiá»‡n.",
                suspects: [
                    {name: "Äá»©c", avatar: "ğŸ‘¨â€ğŸ’¼", description: "Chá»§ nhÃ  kho", guilty: false},
                    {name: "Loan", avatar: "ğŸ‘©â€ğŸ”§", description: "CÃ´ng nhÃ¢n báº£o vá»‡", guilty: false},
                    {name: "Phong", avatar: "ğŸ‘¨â€ğŸ’»", description: "Káº¿ toÃ¡n cÃ´ng ty", guilty: true},
                    {name: "Háº±ng", avatar: "ğŸ‘©â€ğŸ’¼", description: "Äá»‘i tÃ¡c cáº¡nh tranh", guilty: false},
                    {name: "Viá»‡t", avatar: "ğŸ‘¨â€ğŸš’", description: "Cá»±u nhÃ¢n viÃªn", guilty: false},
                    {name: "Thoa", avatar: "ğŸ‘©â€âš–ï¸", description: "NhÃ¢n viÃªn báº£o hiá»ƒm", guilty: false}
                ],
                clues: [
                    "ğŸ”¥ ÄÃ¡m chÃ¡y báº¯t Ä‘áº§u tá»« gÃ³c nhÃ  kho, gáº§n tá»§ há»“ sÆ¡",
                    "â›½ TÃ¬m tháº¥y dáº¥u váº¿t xÄƒng táº¡i hiá»‡n trÆ°á»ng",
                    "ğŸ• Há»‡ thá»‘ng bÃ¡o chÃ¡y bá»‹ táº¯t tá»« 01:45",
                    "ğŸ”‘ Cá»­a nhÃ  kho khÃ´ng cÃ³ dáº¥u hiá»‡u bá»‹ phÃ¡ khÃ³a",
                    "ğŸ“‹ Há»“ sÆ¡ tÃ i chÃ­nh quan trá»ng bá»‹ thiÃªu rá»¥i",
                    "ğŸ’° CÃ´ng ty Ä‘ang cÃ³ váº¥n Ä‘á» vá» tÃ i chÃ­nh nghiÃªm trá»ng",
                    "ğŸ‘® Loan khÃ´ng cÃ³ máº·t Ä‘Ãªm Ä‘Ã³, xin nghá»‰ phÃ©p Ä‘á»™t xuáº¥t",
                    "ğŸ¢ Háº±ng Ä‘ang kiá»‡n cÃ´ng ty vá» há»£p Ä‘á»“ng",
                    "ğŸ’¸ Phong cÃ³ quyá»n truy cáº­p vÃ o táº¥t cáº£ há»“ sÆ¡ tÃ i chÃ­nh",
                    "ğŸ” Phong tá»«ng lÃ m viá»‡c muá»™n Ä‘á»ƒ 'sá»­a sá»• sÃ¡ch'"
                ]
            },
            {
                title: "ğŸ’ Vá»¥ CÆ°á»›p NgÃ¢n HÃ ng",
                location: "NgÃ¢n hÃ ng ACB, chi nhÃ¡nh Nguyá»…n Huá»‡",
                time: "SÃ¡ng 20/8/2025, 09:30",
                item: "5 tá»· Ä‘á»“ng tiá»n máº·t",
                situation: "Má»™t nhÃ³m cÆ°á»›p Ä‘Ã£ thá»±c hiá»‡n vá»¥ cÆ°á»›p ngÃ¢n hÃ ng tinh vi. Tuy nhiÃªn, cáº£nh sÃ¡t nghi ngá» cÃ³ ná»™i giÃ¡n há»— trá»£. CÃ³ 5 nhÃ¢n viÃªn ngÃ¢n hÃ ng Ä‘Ã¡ng nghi.",
                suspects: [
                    {name: "Trang", avatar: "ğŸ‘©â€ğŸ’¼", description: "Quáº£n lÃ½ chi nhÃ¡nh", guilty: false},
                    {name: "HÃ¹ng", avatar: "ğŸ‘¨â€ğŸ’»", description: "NhÃ¢n viÃªn báº£o vá»‡", guilty: false},
                    {name: "LiÃªn", avatar: "ğŸ‘©â€ğŸ’»", description: "Giao dá»‹ch viÃªn", guilty: true},
                    {name: "Nam", avatar: "ğŸ‘¨â€ğŸ”§", description: "Ká»¹ thuáº­t viÃªn IT", guilty: false},
                    {name: "Vy", avatar: "ğŸ‘©â€ğŸ’¼", description: "NhÃ¢n viÃªn tÃ­n dá»¥ng", guilty: false}
                ],
                clues: [
                    "â° Vá»¥ cÆ°á»›p xáº£y ra Ä‘Ãºng lÃºc Ä‘á»•i ca báº£o vá»‡",
                    "ğŸš¨ Há»‡ thá»‘ng bÃ¡o Ä‘á»™ng bá»‹ táº¯t tá»« bÃªn trong",
                    "ğŸ” KÃ©t sáº¯t Ä‘Æ°á»£c má»Ÿ báº±ng mÃ£ sá»‘, khÃ´ng bá»‹ phÃ¡",
                    "ğŸ“· Camera an ninh bá»‹ che khuáº¥t má»™t cÃ¡ch khÃ©o lÃ©o",
                    "ğŸ“± CÃ³ cuá»™c gá»i bÃ­ áº©n Ä‘áº¿n sá»‘ ná»™i bá»™ trÆ°á»›c vá»¥ cÆ°á»›p",
                    "ğŸ’° NhÃ³m cÆ°á»›p biáº¿t chÃ­nh xÃ¡c vá»‹ trÃ­ tiá»n máº·t",
                    "ğŸƒâ€â™‚ï¸ Trang Ä‘ang há»p vá»›i giÃ¡m Ä‘á»‘c táº¡i táº§ng 3",
                    "ğŸ’» Nam Ä‘ang sá»­a mÃ¡y tÃ­nh táº¡i chi nhÃ¡nh khÃ¡c",
                    "ğŸ“ LiÃªn nháº­n Ä‘Æ°á»£c nhiá»u cuá»™c gá»i láº¡ trong tuáº§n",
                    "ğŸ’¸ LiÃªn cÃ³ khoáº£n ná»£ lá»›n táº¡i sÃ²ng báº¡c"
                ]
            }
        ];
        
        function initGame() {
            if (completedCases.length === 0) {
                currentCaseIndex = 0;
            }
           
            currentCase = cases[currentCaseIndex];
            eliminatedSuspects = [];
            shownClues = [];
            displayCase();
            displaySuspects();
            showNewClue();
            updateProgress();
        }
        
        function displayCase() {
            const caseDetails = document.getElementById('caseDetails');
            caseDetails.innerHTML = `
                <h3>${currentCase.title}</h3>
                <p><strong>Thá»i gian:</strong> ${currentCase.time}</p>
                <p><strong>Äá»‹a Ä‘iá»ƒm:</strong> ${currentCase.location}</p>
                <p><strong>Váº­t bá»‹ máº¥t:</strong> ${currentCase.item}</p>
                <p><strong>TÃ¬nh huá»‘ng:</strong> ${currentCase.situation}</p>
            `;
        }
        
        function displaySuspects() {
            const suspectsGrid = document.getElementById('suspectsGrid');
            suspectsGrid.innerHTML = '';
           
            currentCase.suspects.forEach((suspect, index) => {
                const suspectCard = document.createElement('div');
                suspectCard.className = 'suspect-card';
                suspectCard.id = `suspect-${index}`;
                suspectCard.onclick = () => toggleSuspect(index);
               
                if (eliminatedSuspects.includes(index)) {
                    suspectCard.classList.add('eliminated');
                }
               
                suspectCard.innerHTML = `
                    <div class="suspect-avatar">${suspect.avatar}</div>
                    <h4>${suspect.name}</h4>
                    <p>${suspect.description}</p>
                `;
               
                suspectsGrid.appendChild(suspectCard);
            });
            updateEliminatedList();
        }
        
        function toggleSuspect(index) {
            const suspectCard = document.getElementById(`suspect-${index}`);
            const isEliminated = eliminatedSuspects.includes(index);
           
            if (isEliminated) {
                eliminatedSuspects = eliminatedSuspects.filter(i => i !== index);
                suspectCard.classList.remove('eliminated');
            } else {
                eliminatedSuspects.push(index);
                suspectCard.classList.add('eliminated');
            }
           
            updateEliminatedList();
        }
        
        function updateEliminatedList() {
            const eliminatedList = document.getElementById('eliminatedList');
            const eliminatedNames = document.getElementById('eliminatedNames');
           
            if (eliminatedSuspects.length > 0) {
                eliminatedList.style.display = 'block';
                const names = eliminatedSuspects.map(i => currentCase.suspects[i].name).join(', ');
                eliminatedNames.textContent = names;
            } else {
                eliminatedList.style.display = 'none';
            }
        }
        
        function showNewClue() {
            if (shownClues.length >= currentCase.clues.length) {
                alert('ğŸ” ÄÃ£ háº¿t manh má»‘i! HÃ£y Ä‘Æ°a ra káº¿t luáº­n!');
                return;
            }
            const availableClues = currentCase.clues.filter((_, index) => !shownClues.includes(index));
            const randomIndex = Math.floor(Math.random() * availableClues.length);
            const clueIndex = currentCase.clues.indexOf(availableClues[randomIndex]);
            shownClues.push(clueIndex);
            displayClues();
        }
        
        function displayClues() {
            const cluesList = document.getElementById('cluesList');
            cluesList.innerHTML = '';
           
            shownClues.forEach(clueIndex => {
                const clueItem = document.createElement('div');
                clueItem.className = 'clue-item';
                clueItem.textContent = currentCase.clues[clueIndex];
                cluesList.appendChild(clueItem);
            });
        }
        
        function makeGuess() {
            const remainingSuspects = currentCase.suspects.filter((_, index) => !eliminatedSuspects.includes(index));
           
            if (remainingSuspects.length === 0) {
                showResult(false, "Báº¡n Ä‘Ã£ loáº¡i trá»« táº¥t cáº£ nghi pháº¡m! ğŸ¤”");
                return;
            }
           
            if (remainingSuspects.length === 1) {
                const lastSuspect = remainingSuspects[0];
                if (lastSuspect.guilty) {
                    showResult(true, `ChÃ­nh xÃ¡c! ${lastSuspect.name} (${lastSuspect.avatar}) lÃ  thá»§ pháº¡m!`);
                } else {
                    showResult(false, `Sai rá»“i! ${lastSuspect.name} khÃ´ng pháº£i thá»§ pháº¡m.`);
                }
                return;
            }
           
            selectCulprit();
        }
        
        function selectCulprit() {
            const remainingSuspects = currentCase.suspects.filter((_, index) => !eliminatedSuspects.includes(index));
           
            currentCase.suspects.forEach((suspect, index) => {
                const card = document.getElementById(`suspect-${index}`);
                if (!eliminatedSuspects.includes(index)) {
                    card.classList.add('selected');
                    card.onclick = () => checkGuess(index);
                }
            });
           
            alert('HÃ£y nháº¥p vÃ o nghi pháº¡m mÃ  báº¡n cho lÃ  thá»§ pháº¡m!');
        }
        
        function checkGuess(suspectIndex) {
            const suspect = currentCase.suspects[suspectIndex];
           
            if (suspect.guilty) {
                showResult(true, `ğŸ‰ Xuáº¥t sáº¯c! ${suspect.name} (${suspect.avatar}) chÃ­nh lÃ  thá»§ pháº¡m!`);
            } else {
                const realCulprit = currentCase.suspects.find(s => s.guilty);
                showResult(false, `âŒ Sai rá»“i! Thá»§ pháº¡m tháº­t sá»± lÃ  ${realCulprit.name} (${realCulprit.avatar})`);
            }
           
            currentCase.suspects.forEach((_, index) => {
                const card = document.getElementById(`suspect-${index}`);
                card.classList.remove('selected');
                card.onclick = () => toggleSuspect(index);
            });
        }
        
        function showResult(success, message) {
            const modal = document.getElementById('resultModal');
            const title = document.getElementById('resultTitle');
            const content = document.getElementById('resultContent');
           
            title.textContent = success ? 'ğŸ‰ CHÃšC Má»ªNG!' : 'ğŸ˜” THáº¤T Báº I!';
           
            let progressInfo = '';
            let buttons = '';
           
            if (success) {
                if (!completedCases.includes(currentCaseIndex)) {
                    completedCases.push(currentCaseIndex);
                }
               
                if (completedCases.length < cases.length) {
                    progressInfo = `<div class="progress-info">Tiáº¿n Ä‘á»™: ${completedCases.length}/${cases.length} vá»¥ Ã¡n Ä‘Ã£ giáº£i quyáº¿t</div>`;
                    buttons = `<button class="btn success" onclick="nextCase(); closeModal();">ğŸ” Vá»¥ Ãn Tiáº¿p Theo</button>
                              <button class="btn" onclick="closeModal()">ÄÃ³ng</button>`;
                } else {
                    progressInfo = '<div class="progress-info" style="background: rgba(253, 203, 110, 0.2); border-color: rgba(253, 203, 110, 0.3);">ğŸ† CHÃšC Má»ªNG! Báº N ÄÃƒ GIáº¢I QUYáº¾T Táº¤T Cáº¢ CÃC Vá»¤ ÃN! ğŸ†</div>';
                    buttons = `<button class="btn success" onclick="resetAllCases(); closeModal();">ğŸ”„ Báº¯t Äáº§u Láº¡i</button>
                              <button class="btn" onclick="closeModal()">ÄÃ³ng</button>`;
                }
            } else {
                buttons = `<button class="btn warning" onclick="closeModal()">ğŸ”„ ChÆ¡i Láº¡i</button>
                          <button class="btn" onclick="closeModal()">ÄÃ³ng</button>`;
            }
           
            content.innerHTML = `
                <p style="font-size: 1.1rem; margin-bottom: 15px;">${message}</p>
                ${progressInfo}
                <div style="text-align: left; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-top: 15px;">
                    <h4 style="color: var(--secondary); margin-bottom: 10px; font-size: 1rem;">ğŸ“ Giáº£i thÃ­ch:</h4>
                    <div style="margin-top: 10px;">
                        ${currentCase.clues.slice(0, Math.min(shownClues.length + 2, currentCase.clues.length)).map(clue =>
                            `<p style="margin: 6px 0; padding-left: 8px; border-left: 2px solid var(--primary); font-size: 0.9rem;">${clue}</p>`
                        ).join('')}
                    </div>
                </div>
                <div class="modal-buttons">
                    ${buttons}
                </div>
            `;
           
            modal.style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }
        
        function showHelpModal() {
            document.getElementById('helpModal').style.display = 'flex';
        }
        
        function closeHelpModal() {
            document.getElementById('helpModal').style.display = 'none';
        }
        
        function goBack() {
            window.location.href = "game.html";
        }
        
        function newCase() {
            initGame();
        }
        
        function nextCase() {
            let nextIndex = -1;
            for (let i = 0; i < cases.length; i++) {
                if (!completedCases.includes(i)) {
                    nextIndex = i;
                    break;
                }
            }
           
            if (nextIndex !== -1) {
                currentCaseIndex = nextIndex;
                initGame();
            } else {
                resetAllCases();
            }
        }
        
        function resetAllCases() {
            completedCases = [];
            currentCaseIndex = 0;
            initGame();
        }
        
        function updateProgress() {
            const header = document.querySelector('.header p');
            if (completedCases.length > 0) {
                header.textContent = `Sá»­ dá»¥ng cÃ¡c manh má»‘i Ä‘á»ƒ tÃ¬m ra thá»§ pháº¡m! (ÄÃ£ giáº£i: ${completedCases.length}/${cases.length} vá»¥ Ã¡n)`;
            } else {
                header.textContent = "Sá»­ dá»¥ng cÃ¡c manh má»‘i Ä‘á»ƒ tÃ¬m ra thá»§ pháº¡m!";
            }
        }
        
        window.onload = initGame;
    </script>
</body>
</html>
